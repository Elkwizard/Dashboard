{
    "layoutName": "Test2019.json",
    "environments": {
        "_comment_": "NB: this is not a general variable subst mechanism.",
        "default": {
            "visionbackcam": "10.49.15.10",
            "driverbackcam": "10.49.15.11",
            "driverfrontcam": "10.49.15.12"
        },
        "dana": {
            "visionbackcam": "192.168.0.9",
            "driverbackcam": "192.168.0.7",
            "driverfrontcam": "192.168.0.8"
        }
    },
    "pageTemplates": [
        {
            "icon": "fas fa-gamepad primary",
            "navtext": "Compete",
            "widgets": [
                {
                    "type": "systemstate",
                    "id": "compete",
                    "label": "Driver Interface",
                    "size": ["fill", "row"],
                    "wsize": [800, "row"],
                    "widgets": [
                        {
                            "type": "fieldconfig",
                            "label": "Field Config",
                            "id": "fieldconfig",
                            "size": [800, "row"],
                            "ntkeys": [
                                "/SmartDashboard/AutoStrategy",
                                "/SmartDashboard/AutoStrategyOptions",
                                "/FMSInfo/IsRedAlliance",
                                "/FMSInfo/StationNumber",
                                "/FMSInfo/GameSpecificMessage",
                                "/FMSInfo/ReplayNumber",
                                "/FMSInfo/FMSControlData",
                                "/FMSInfo/EventName",
                                "/FMSInfo/MatchType",
                                "/FMSInfo/MatchNumber",
                                "/SmartDashboard/Driver/Camera"
                            ],
                            "params": {
                                "cameraSelector":
                                {
                                    "label": "Camera",
                                    "ntkey": "/SmartDashboard/Driver/Camera",
                                    "_comment_": "we only control one camera",
                                    "options": [
                                        "Test",
                                        "Front",
                                        "Front2X",
                                        "FrontFit",
                                        "FrontFit (no overlay)"
                                    ]
                                }
                            }
                        }
                    ]
                },
                {
                    "type": "cameras",
                    "id": "drivercams",
                    "size": [1340, 800],
                    "ntkeys":
                    [
                        "/SmartDashboard/Driver/Camera"
                    ],
                    "params":
                    {
                        "_comment_": "selector:false -> no menu in this widget",
                        "selector": false,
                        "overlay":
                        {
                            "enable": true,
                            "updateinterval": 500,
                            "_comment_": "items drawn in order (bottom-to-top)",
                            "items":
                            [
                                {
                                    "class": "opencv",
                                    "enable": false,
                                    "_comment_": "NB: opencv must be loaded",
                                    "pipeline": "canny"
                                },
                                {
                                    "class": "time",
                                    "enable": true,
                                    "origin": [300, 30],
                                    "font": "30px Arial, serif",
                                    "fillStyle": "rgba(255, 255, 10, .85)",
                                    "value": "_"
                                },
                                {
                                    "key": "/SmartDashboard/Driver/Camera",
                                    "class": "text",
                                    "enable": true,
                                    "origin": [10, 30],
                                    "font": "30px Arial, serif",
                                    "fillStyle": "rgba(255, 255, 10, .85)",
                                    "value": "<nocamera>"
                                },
                                {
                                    "key": "/SmartDashboard/Driver/CameraOverlay/Circle",
                                    "class": "circle",
                                    "enable": true,
                                    "strokeStyle": "rgba(255, 0, 10, .85)",
                                    "value": "200,200,35,3"
                                },
                                {
                                    "key": "/SmartDashboard/Driver/CameraOverlay/Rect",
                                    "class": "rect",
                                    "enable": false,
                                    "strokeStyle": "rgba(100, 0, 150, .85)",
                                    "value": "300,300,30,30,3,5"
                                }
                            ]
                        },
                        "cameras":
                        {
                            "Test":
                            {
                                "protocol": "testpattern",
                                "cls": "size720"
                            },
                            "Front":
                            {
                                "protocol": "ws",
                                "ip": "${driverfrontcam}:8080",
                                "url": "/stream/webrtc",
                                "cls": "rotate0"
                            },
                            "Front2X":
                            {
                                "protocol": "ws",
                                "ip": "${driverfrontcam}:8080",
                                "url": "/stream/webrtc",
                                "cls": "rotate0 size2x"
                            },
                            "FrontFit":
                            {
                                "protocol": "ws",
                                "ip": "${driverfrontcam}:8080",
                                "url": "/stream/webrtc",
                                "cls": "rotate0 scaled"
                            },
                            "Front2X (no overlay)":
                            {
                                "protocol": "ws",
                                "ip": "${driverfrontcam}:8080",
                                "url": "/stream/webrtc",
                                "cls": "rotate0 size2x",
                                "overlay": false
                            },
                            "_comment_": "back is in other panel"
                        }
                    }
                }
            ]
        },
        {
            "navtext": "Drive",
            "icon":  "fas fa-tachometer-alt",
            "widgets": [
                {
                    "id": "Drive",
                    "label": "Drive Subsystem",
                    "type": "systemstate",
                    "size": ["fill", "row"],
                    "ntkeys": ["/SmartDashboard/Drive/State",
                              "/SmartDashboard/Drive/Status"]
                },
                {
                    "id": "driveOdometry",
                    "label": "Odometry",
                    "type": "pathplot",
                    "size": [400, 300],
                    "ntkeys": "/SmartDashboard/RobotState/pose",
                    "params": {
                        "plot": {
                            "xaxis": {
                                "min": -326,
                                "max": 326,
                                "show": 1
                            },
                            "yaxis": {
                                "min": -162,
                                "max": 162,
                                "show": 1
                            },
                            "series": {
                                "shadowSize": 0,
                                "lines": {
                                    "show": 1,
                                    "lineWidth": 1
                                },
                                "points": {
                                    "show": 0
                                },
                                "color": "rgb(20, 120, 255)"
                            }
                        }
                    }
                },
                {
                    "id": "driveIMU",
                    "label": "IMU Heading",
                    "type": "stripchart",
                    "size": [330, 300],
                    "ntkeys": "/SmartDashboard/Drive/imuHeading",
                    "params": {
                        "plot": {
                            "yaxis": {
                                "min": -200,
                                "max": 200
                            },
                            "widths": [1],
                            "colors":["rgb(20,120,255)"]
                        }
                    }
                },
                {
                    "id": "driveSpeedLeft",
                    "label": "Left <span class='blue'>Speed</span>, <span class='yellow'>Target</span>",
                    "type": "stripchart",
                    "size": [330, 170],
                    "ntkeys": "/SmartDashboard/Drive/leftSpeed",
                    "ntkeyRefs":[
                        "/SmartDashboard/Drive/leftSpeedTarget"
                    ],
                    "params": {
                        "plot": {
                            "yaxis": {
                                "min": -80,
                                "max": 80
                            },
                            "fillvalue": 0,
                            "colors":["rgb(20,120,255)", "rgb(200,200,10)"],
                            "channelcount": 2,
                            "widths": [1, 1],
                            "maxlength": 400
                        }
                    }
                },
                {
                    "id": "driveSpeedRight",
                    "label": "Right <span class='blue'>Speed</span>, <span class='yellow'>Target</span>",
                    "type": "stripchart",
                    "size": [330, 170],
                    "ntkeys": "/SmartDashboard/Drive/rightSpeed",
                    "ntkeyRefs":[
                        "/SmartDashboard/Drive/rightSpeedTarget"
                    ],
                    "params": {
                        "plot": {
                            "yaxis": {
                                "min": -80,
                                "max": 80
                            },
                            "fillvalue": 0,
                            "colors":["rgb(20,120,255)", "rgb(200,200,10)"],
                            "channelcount": 2,
                            "widths": [1, 1],
                            "maxlength": 400
                        }
                    }
                },
                {
                    "id": "trajectoryStates",
                    "label": "Trajectory State - <span class='blue'>vel</span> <span class='yellow'>acc</a> <span class='amber'>curv</span>",
                    "type": "stripchart",
                    "size": [330, 170],
                    "_comment": "expect 'velocity acceleration curvature'",
                    "ntkeys": "/SmartDashboard/DriveMotionPlanner/trajectorySetpoints",
                    "params": {
                        "plot": {
                            "yaxis": {
                                "min": -35,
                                "max":  35
                            },
                            "fillvalue": 0,
                            "colors":["rgb(20,120,255)", "rgb(200,200,10)", "rgb(200,100,0)"],
                            "channelcount": 3,
                            "widths": [1, 1, 1],
                            "maxlength": 400
                        }
                    }
                },
                {
                    "id": "leftSpeedoverVoltage",
                    "label": "Left Speed vs %Vbus",
                    "type": "pathplot",
                    "size": [300, 300],
                    "ntkeys": [
                        "/SmartDashboard/Drive/leftDemand"
                    ],
                    "ntkeyRefs": [
                        "/SmartDashboard/Drive/leftSpeed"
                    ],
                    "params": {
                        "plot": {
                            "xaxis": {
                                "min": 0,
                                "max": 1,
                                "show": 1
                            },
                            "yaxis": {
                                "min": 0,
                                "max": 80,
                                "show": 1
                            },
                            "series": {
                                "shadowSize": 0,
                                "lines": {
                                    "show": 0,
                                    "lineWidth": 1
                                },
                                "points": {
                                    "show": 1,
                                    "radius": 0.5,
                                    "fill": 0
                                },
                                "color": "rgb(20, 120, 255)"
                            }
                        }
                    }

                },
                {
                    "id": "Lidar",
                    "label": "Lidar",
                    "type": "systemstate",
                    "size": ["fill", 40],
                    "ntkeys": ["/SmartDashboard/Lidar/status",
                               "/SmartDashboard/Lidar/angle",
                               "/SmartDashboard/Turret/state"
                            ]
                },
                {
                    "id": "lidarOdometry",
                    "label": "LIDAR Odometry",
                    "type": "pathplot",
                    "size": [330, 170],
                    "ntkeys": "/SmartDashboard/Lidar/pose",
                    "params": {
                        "plot": {
                            "xaxis": {
                                "min": 0,
                                "max": 652,
                                "show": 1
                            },
                            "yaxis": {
                                "min": -162,
                                "max": 162,
                                "show": 1
                            },
                            "series": {
                                "shadowSize": 0,
                                "lines": {
                                    "show": 1,
                                    "lineWidth": 1
                                },
                                "points": {
                                    "show": 0
                                },
                                "color": "rgb(20, 120, 255)"
                            }
                        }
                    }
                },
                {
                    "id": "lidarPoints",
                    "label": "LIDAR Points",
                    "type": "pathplot",
                    "size": [330, 170],
                    "ntkeys": "/SmartDashboard/Lidar/points",
                    "params": {
                        "plot": {
                            "xaxis": {
                                "min": 0,
                                "max": 652,
                                "show": 1
                            },
                            "yaxis": {
                                "min": 0,
                                "max": 324,
                                "show": 1
                            },
                            "series": {
                                "shadowSize": 0,
                                "lines": {
                                    "show": 0
                                },
                                "points": {
                                    "show": 1,
                                    "radius": 0.5,
                                    "fill": 0
                                },
                                "color": "rgb(20, 120, 255)"
                            },
                            "maxlength": 300
                        }
                    }
                },
                {
                    "id": "lidarPtsRel",
                    "label": "LIDAR Rel Points",
                    "type": "pathplot",
                    "size": [230, 230],
                    "websubkeys": "lidarscan",
                    "params": {
                        "plot": {
                            "xaxis": {
                                "min": -100,
                                "max": 100,
                                "show": 1
                            },
                            "yaxis": {
                                "min": -100,
                                "max": 100,
                                "show": 1
                            },
                            "series": {
                                "shadowSize": 0,
                                "lines": {
                                    "show": 0
                                },
                                "points": {
                                    "show": 1,
                                    "radius": 0.5,
                                    "fill": 0
                                },
                                "color": "rgb(20, 120, 255)"
                            },
                            "maxlength":  360
                        }
                    }
                }
            ]
        },
        {
            "navtext": "Climb",
            "icon":  "fas fa-rocket",
            "widgets": [
                {
                    "id": "Climb",
                    "label": "Climb Subsystem",
                    "type": "systemstate",
                    "size": ["fill", "row"],
                    "ntkeys": [
                        "/SmartDashboard/Climb/State",
                        "/SmartDashboard/Climb/Status"
                    ]
                }
            ]
        },
        {
            "navtext": "Vision",
            "icon":  "fas fa-eye",
            "widgets": [
                {
                    "id": "Vision",
                    "label": "Vision Subsystem",
                    "type": "systemstate",
                    "size": ["fill", "row"],
                    "ntkeys": "/SmartDashboard/Vision/State"
                },
                {
                    "type": "cameras",
                    "label": "Camera View",
                    "id": "cameras",
                    "size": [700, 700],
                    "ntkeys": [
                        "/SmartDashboard/Vision/Camera"
                    ],
                    "params": {
                        "selector": true,
                        "cameras":
                        {
                            "PiCam default (.10)":
                            {
                                "ip": "${visionbackcam}:5080",
                                "url": "/default.mjpg",
                                "cls": "rotate0 size640"
                            },
                            "PiCam hsv (.10)":
                            {
                                "ip": "${visionbackcam}:5080",
                                "url": "/hsv.mjpg",
                                "cls": "rotate0 size640"
                            },
                            "PiCam bypass mjpg (.10)":
                            {
                                "ip": "${visionbackcam}:5080",
                                "url": "/bypass.mjpg",
                                "cls": "rotate0 size640"
                            },
                            "PiCam default vision":
                            {
                                "ip": "frcvision.local:5080",
                                "url": "/default.mjpg",
                                "cls": "rotate0 size640"
                            },
                            "PiCam mask":
                            {
                                "ip": "frcvision.local:5080",
                                "url": "/mask.mjpg",
                                "cls": "rotate0 size640"
                            },
                            "PiCam bypass mjpg":
                            {
                                "ip": "frcvision.local:5080",
                                "url": "/bypass.mjpg",
                                "cls": "rotate0 size640"
                            }
                        }
                    }
                }
            ]
        },
        {
            "navtext": "Test",
            "icon": "fas fa-vial",
            "widgets": [
                {
                    "type": "systemstate",
                    "id": "Test",
                    "label": "Test Subsystem",
                    "size": ["fill", "row"],
                    "ntkeys": []
                },
                {
                    "type": "selector",
                    "label": "Test Mode",
                    "id": "testmode",
                    "size": [220, "row"],
                    "ntkeys": ["/SmartDashboard/TestMode",
                               "/SmartDashboard/TestModeOptions"],
                    "params": {
                        "width": "9em",
                        "ntkey": "/SmartDashboard/TestMode",
                        "optionsntkey": "/SmartDashboard/TestModeOptions"
                    }
                },
                {
                    "type": "textinput",
                    "label": "Variant",
                    "id": "testvariant",
                    "size": [220, "row"],
                    "ntkeys": ["/SmartDashboard/TestVariant"],
                    "params": {
                        "width": "10em"
                    }
                },
                {
                    "type": "systemstate",
                    "id": "widgets",
                    "label": "Example Widgets",
                    "size": ["fill", "row"],
                    "ntkeys": []
                },
                {
                    "type": "slider",
                    "id": "s1",
                    "label": "A Slider",
                    "size": [200, "row"],
                    "ntkeys": ["/SmartDashboard/Test/Slider1"],
                    "params": {
                        "min": 0,
                        "max": 100,
                        "step": 1
                    }
                },
                {
                    "type": "numberinput",
                    "id": "s2",
                    "label": "A Number",
                    "size": [200, "row"],
                    "ntkeys": ["/SmartDashboard/Test/Number1"],
                    "params": {
                        "min": 0,
                        "max": 1,
                        "step": 0.01
                    }
                },
                {
                    "type": "textinput",
                    "id": "s3",
                    "label": "Some Text",
                    "size": [220, "row"],
                    "ntkeys": ["/SmartDashboard/Test/Text1"],
                    "params": {
                        "width": "8em"
                    }
                },
                {
                    "type": "checkbox",
                    "label": "A Checkbox",
                    "id": "s4",
                    "size": [120, "row"],
                    "ntkeys": ["/SmartDashboard/Test/Check1"]
                },
                {
                    "type": "selector",
                    "label": "A Selector",
                    "id": "s5",
                    "size": [200, "row"],
                    "ntkeys": ["/SmartDashboard/Test/Sel1"],
                    "params": {
                        "width": "8em",
                        "ntkey": "/SmartDashboard/Test/Sel1",
                        "options": [
                             "blue pill",
                             "red pill"
                        ]
                    }
                },
                {
                    "type": "rangeslider",
                    "size": [200, "row"],
                    "label": "Range Slider",
                    "id": "hrange",
                    "ntkeys": "/SmartDashboard/Test/TestRange",
                    "params":
                    {
                       "min": 0,
                       "max": 255,
                       "from": 0,
                       "to": 255
                    }
                }
            ]
        },
        {
            "navtext": "Network Tables",
            "icon": "fas fa-network-wired",
            "pagehandler": "NetTabPH",
            "widgets": [
                {
                    "type": "nettab",
                    "label": "networktables",
                    "id": "nettab",
                    "size": ["fill", "fill"]
                }
            ]
        },
        {
            "navtext": "Robot Log",
            "icon":  "fas fa-robot",
            "pagehandler": "RobotlogPH",
            "widgets": [
                {
                    "type": "robotdevices",
                    "label": "devices",
                    "id": "robotdevs",
                    "size": ["fill", "row"],
                    "ntkeys": ["/SmartDashboard/Robot/Connections"]
                },
                {
                    "type": "robotlog",
                    "label": "robologs",
                    "id": "robotlog",
                    "size": ["fill", "fill"],
                    "ntkeys": ["/SmartDashboard/Robot/Verbosity"]
                }
            ]
        },
        {
            "navtext": "About",
            "icon": "fas fa-cogs",
            "widgets": [
                {
                    "type": "html",
                    "id": "about",
                    "size": [400, 280],
                    "params": {
                        "url": "/pages/about.html"
                    }
                },
                {
                    "type": "html",
                    "id": "about2",
                    "size": [400, 280],
                    "params": {
                        "url": "/pages/about.html"
                    }
                },
                {
                    "type": "html",
                    "id": "about3",
                    "size": [400, 280],
                    "params": {
                        "url": "/pages/about.html"
                    }
                },
                {
                    "type": "html",
                    "id": "about4",
                    "size": [400, 280],
                    "params": {
                        "url": "/pages/about.html"
                    }
                }
            ]
        },
        {
            "_comment": "this page has no icon ----------",
            "icon": "_none_",
            "navtext": "cam-only",
            "widgets": [
                {
                    "type": "cameras",
                    "id": "drivercams",
                    "size": [1340, 800],
                    "ntkeys":
                    [
                        "/SmartDashboard/Driver/Camera2"
                    ],
                    "params":
                    {
                        "selector": false,
                        "_comment": "selector false -> no selector menu",
                        "overlay":
                        {
                            "enable": true,
                            "updateinterval": 500,
                            "_comment_": "items drawn in order (bottom-to-top)",
                            "items":
                            [
                                {
                                    "key": "/SmartDashboard/Driver/Camera2",
                                    "class": "text",
                                    "enable": true,
                                    "origin": [10, 30],
                                    "font": "30px Arial, serif",
                                    "fillStyle": "rgba(255, 255, 10, .85)",
                                    "value": "<nocamera>"
                                },
                                {
                                    "key": "/SmartDashboard/Driver/CameraOverlay2/Circle",
                                    "class": "circle",
                                    "enable": true,
                                    "strokeStyle": "rgba(255, 0, 10, .85)",
                                    "value": "200,200,35,3"
                                },
                                {
                                    "key": "/SmartDashboard/Driver/CameraOverlay2/Rect",
                                    "class": "rect",
                                    "enable": false,
                                    "strokeStyle": "rgba(100, 0, 150, .85)",
                                    "value": "300,300,30,30,3,5"
                                }
                            ]
                        },
                        "cameras":
                        {
                            "Back":
                            {
                                "protocol": "ws",
                                "ip": "${driverbackcam}:8080",
                                "url": "/stream/webrtc",
                                "cls": "rotate0"
                            },
                            "Back2X":
                            {
                                "protocol": "ws",
                                "ip": "${driverbackcam}:8080",
                                "url": "/stream/webrtc",
                                "cls": "rotate0 size2x"
                            },
                            "BackFit":
                            {
                                "protocol": "ws",
                                "ip": "${driverbackcam}:8080",
                                "url": "/stream/webrtc",
                                "cls": "rotate0 scaled"
                            },
                            "Back2X (no overlay)":
                            {
                                "protocol": "ws",
                                "ip": "${driverbackcam}:8080",
                                "url": "/stream/webrtc",
                                "cls": "rotate0 size2x",
                                "overlay": false
                            },
                            "_comment_": "front is in other panel"
                        }
                    }
                }
            ]
        }
    ]
}
